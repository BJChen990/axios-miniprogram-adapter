!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios/lib/utils"),require("axios/lib/core/settle"),require("axios/lib/helpers/buildURL"),require("axios/lib/core/createError")):"function"==typeof define&&define.amd?define(["axios/lib/utils","axios/lib/core/settle","axios/lib/helpers/buildURL","axios/lib/core/createError"],t):e["axios-miniprogram-adapter"]=t(e.utils,e.settle,e.buildURL,e.createError)}(this,function(f,l,p,h){"use strict";f=f&&f.hasOwnProperty("default")?f.default:f,l=l&&l.hasOwnProperty("default")?l.default:l,p=p&&p.hasOwnProperty("default")?p.default:p,h=h&&h.hasOwnProperty("default")?h.default:h;var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var b=console.warn;return function(c){return new Promise(function(o,a){var t,i=c.data,s=c.headers,n={method:c.method,url:p(c.url,c.params,c.paramsSerializer),success:function(e){var t="";200===e.statusCode?t="OK":400===e.statusCode&&(t="Bad Request");var r={data:e.data,status:e.statusCode,statusText:t,headers:e.header,config:c,request:n};l(o,a,r)},fail:function(e){-1!==e.errMsg.indexOf("request:fail abort")?a(h("Request aborted",c,"ECONNABORTED","")):-1!==e.errMsg.indexOf("timeout")?a(h("timeout of "+c.timeout+"ms exceeded",c,"ECONNABORTED","")):a(h("Network Error",c,null,""))},complete:function(){t=void 0}};if(c.auth){var e=[c.auth.username||"",c.auth.password||""],r=e[0],u=e[1];s.Authorization="Basic "+function(e){for(var t,r,o=String(e),a=0,i=m,s="";o.charAt(0|a)||(i="=",a%1);s+=i.charAt(63&t>>8-a%1*8)){if(255<(r=o.charCodeAt(a+=.75)))throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|r}return s}(r+":"+u)}0!==c.timeout&&b('The "timeout" option is not supported by miniprogram. For more information about usage see "https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#全局配置"'),f.forEach(s,function(e,t){var r=t.toLowerCase();if(void 0===i&&"content-type"===r||"referer"===r)delete s[t];else if("string"==typeof i&&"content-type"===r&&"application/x-www-form-urlencoded"===e)try{i=JSON.parse(i)}catch(e){}}),n.header=s,c.responseType&&(n.responseType=c.responseType),c.cancelToken&&c.cancelToken.promise.then(function(e){t&&(t.abort(),a(e),t=void 0)}),void 0!==i&&(n.data=i);var d=function(){switch(!0){case"object"==typeof wx:return wx;case"object"==typeof swan:return swan;case"object"==typeof my:return my;default:return wx}}();t=d.request(n)})}});
